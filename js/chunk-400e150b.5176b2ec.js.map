{"version":3,"sources":["webpack:///./src/views/Message.vue?b249","webpack:///./src/views/Message.vue?fb6f","webpack:///src/views/Message.vue","webpack:///./src/views/Message.vue?d4fc","webpack:///./src/views/Message.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","attrs","_v","on","hideMsg","proxy","$event","preventDefault","changeTab","_s","msg","hasnot_read_messages","length","has_read_messages","_l","isOnRead","item","index","id","view","name","params","author","loginname","domProps","reply","content","topic","title","staticRenderFns","components","data","computed","accessToken","$store","state","created","accesstoken","console","log","$axios","commit","methods","flag","component"],"mappings":"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","file":"js/chunk-400e150b.5176b2ec.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=ab0e7476&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message\"},[_c('div',[_c('Panel',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('span',[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"主页\")]),_vm._v(\"/\"),_c('span',{on:{\"click\":_vm.hideMsg}},[_vm._v(\"消息\")])],1)]},proxy:true},{key:\"content\",fn:function(){return [_c('div',{on:{\"click\":function($event){$event.preventDefault();return _vm.changeTab(true)}}},[_vm._v(\" 未读消息: \"+_vm._s(_vm.msg.hasnot_read_messages.length)+\" \")]),_c('div',{on:{\"click\":function($event){$event.preventDefault();return _vm.changeTab(false)}}},[_vm._v(\" 已读消息: \"+_vm._s(_vm.msg.has_read_messages.length)+\" \")]),_c('div',{staticClass:\"msg-list\"},_vm._l((_vm.isOnRead\n              ? _vm.msg.hasnot_read_messages\n              : _vm.msg.has_read_messages),function(item,index){return _c('div',{key:item.id + index,staticClass:\"msg-item\"},[_c('div',{staticClass:\"msg-body\"},[_c('div',{staticClass:\"msg-name\"},[_c('span',{on:{\"click\":_vm.view}},[_c('router-link',{attrs:{\"to\":{\n                      name: 'user',\n                      params: { name: item.author.loginname },\n                    }}},[_vm._v(_vm._s(item.author.loginname))])],1),_vm._v(\" 的回复： \")]),_c('div',{staticClass:\"msg-msg\",domProps:{\"innerHTML\":_vm._s(item.reply.content)}}),_c('div',{on:{\"click\":_vm.view}},[_c('div',{staticClass:\"msg-from\"},[_c('router-link',{attrs:{\"to\":{ name: 'article', params: { id: item.topic.id } }}},[_vm._v(\" 来自：\"+_vm._s(item.topic.title)+\" \")])],1)])])])}),0)]},proxy:true}])})],1),_c('div')])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"message\">\r\n    <div>\r\n      <Panel>\r\n        <template #header>\r\n          <span><router-link to=\"/\">主页</router-link>/<span @click=\"hideMsg\">消息</span></span>\r\n        </template>\r\n        <template #content>\r\n          <div @click.prevent=\"changeTab(true)\">\r\n            未读消息: {{ msg.hasnot_read_messages.length }}\r\n          </div>\r\n          <div @click.prevent=\"changeTab(false)\">\r\n            已读消息: {{ msg.has_read_messages.length }}\r\n          </div>\r\n\r\n          <div class=\"msg-list\">\r\n            <div\r\n              v-for=\"(item, index) of isOnRead\r\n                ? msg.hasnot_read_messages\r\n                : msg.has_read_messages\"\r\n              :key=\"item.id + index\"\r\n              class=\"msg-item\"\r\n            >\r\n              <div class=\"msg-body\">\r\n                <div class=\"msg-name\">\r\n                  <span @click=\"view\">\r\n                    <router-link\r\n                      :to=\"{\r\n                        name: 'user',\r\n                        params: { name: item.author.loginname },\r\n                      }\"\r\n                      >{{ item.author.loginname }}</router-link\r\n                    >\r\n                  </span>\r\n                  的回复：\r\n                </div>\r\n                <div v-html=\"item.reply.content\" class=\"msg-msg\"></div>\r\n                <div @click=\"view\">\r\n                  <div class=\"msg-from\">\r\n                    <router-link\r\n                      :to=\"{ name: 'article', params: { id: item.topic.id } }\"\r\n                    >\r\n                      来自：{{ item.topic.title }}\r\n                    </router-link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </Panel>\r\n    </div>\r\n    <div>\r\n      <!-- <Panel>\r\n        <template #header>\r\n          <span>过往消息</span>\r\n        </template>\r\n        <template #content>\r\n          <p>无消息</p>\r\n        </template>\r\n      </Panel> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Panel from \"../layout/Panel.vue\";\r\nexport default {\r\n  components: { Panel },\r\n  name: \"msg\",\r\n\r\n  data() {\r\n    return {\r\n      msg: {\r\n        hasnot_read_messages: [],\r\n        has_read_messages: [],\r\n      },\r\n      isOnRead: true,\r\n    };\r\n  },\r\n  computed: {\r\n    accessToken() {\r\n      return this.$store.state.accessToken;\r\n    },\r\n  },\r\n  created() {\r\n    if (!this.accesstoken) {\r\n      this.$store.commit(\"showLogin\", true);\r\n      return;\r\n    }\r\n    console.log(this.msg);\r\n    this.$axios\r\n      .get(`/messages?accesstoken={this.accessToken}`)\r\n      .then((result) => result.data.data)\r\n      .then((msg) => (this.msg = msg));\r\n  },\r\n  methods: {\r\n    hideMsg() {\r\n      this.$store.commit(\"showMsg\", false);\r\n    },\r\n    changeTab(flag) {\r\n      this.isOnRead = flag;\r\n    },\r\n    view() {\r\n      this.$store.commit(\"showMsg\", false);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.message {\r\n  div {\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=ab0e7476&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=ab0e7476&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ab0e7476\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}